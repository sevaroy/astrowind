---
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero.astro';
import Content from '~/components/widgets/Content.astro';
import Features from '~/components/widgets/Features.astro';
import Steps from '~/components/widgets/Steps.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Testimonials from '~/components/widgets/Testimonials.astro';
import GumroadOverlay from '~/components/common/GumroadOverlay.astro';

// 定义Gumroad参数
const GUMROAD_PRODUCT_ID = import.meta.env.PUBLIC_GUMROAD_PRODUCT_ID || 'YOUR_GUMROAD_PRODUCT_ID';
const GUMROAD_PERMALINK = import.meta.env.PUBLIC_GUMROAD_PERMALINK || 'your-product-permalink';
const GUMROAD_PRICE = import.meta.env.PUBLIC_GUMROAD_PRICE || '29.99';

const metadata = {
  title: '电子书销售 - 您的知识产品',
  ignoreTitleTemplate: true,
};

---

<Layout metadata={metadata}>
  <!-- 加载 Gumroad Overlay 脚本 -->
  <GumroadOverlay />

  <!-- Hero Widget: 电子书主标题和简介 -->
  <Hero
    actions={[
      {
        variant: 'primary',
        text: `立即购买 ¥${GUMROAD_PRICE}`,
        href: `https://gumroad.com/l/${GUMROAD_PRODUCT_ID}?wanted=true`,
        target: '_blank',
        class: 'gumroad-button',
        'data-gumroad-overlay-checkout': 'true',
        icon: 'tabler:shopping-cart',
      },
      { text: '了解更多', href: '#features' },
    ]}
    image={{ src: '~/assets/images/ebook-cover.png', alt: '电子书封面图片' }}
  >
    <Fragment slot="title">
      您的知识内容 <span class="text-accent dark:text-white">值得被看见</span>
    </Fragment>

    <Fragment slot="subtitle">
      精心打造的电子书，提供独到见解和专业分析。无论您的专业领域是什么，这个模板都能帮助您展示价值并吸引目标读者。
    </Fragment>
  </Hero>

  <!-- Features Widget: 电子书核心特点 -->
  <Features
    id="features"
    tagline="核心特点"
    title="为什么选择这本电子书？"
    subtitle="我们精心打造的内容能为您提供真正的价值"
    items={[
      {
        title: '专业洞见',
        description:
          '由行业专家撰写，提供深入分析和独特视角，帮助您获取可操作的知识。',
        icon: 'tabler:brain',
      },
      {
        title: '实用工具',
        description:
          '包含实用的工具、方法和框架，让您能立即应用所学知识解决实际问题。',
        icon: 'tabler:tool',
      },
      {
        title: '清晰易懂',
        description:
          '复杂概念简单化，通过生动的例子和清晰的解释，让您轻松理解关键内容。',
        icon: 'tabler:bulb',
      },
      {
        title: '持续更新',
        description:
          '购买一次，终身享有更新。我们会定期更新内容，确保信息始终保持最新和相关。',
        icon: 'tabler:refresh',
      },
      {
        title: '额外资源',
        description:
          '附赠工作表、模板和资源列表，帮助您将知识转化为实际成果。',
        icon: 'tabler:file-plus',
      },
      {
        title: '社区支持',
        description:
          '加入专属社区，与作者和其他读者交流，分享经验和获取额外指导。',
        icon: 'tabler:users',
      },
    ]}
  />

  <!-- Content Widget: 电子书内容预览 -->

  <Content
    isReversed
    tagline="内容预览"
    title="您将在这本电子书中学到什么"
    items={[
      {
        title: '第一章: 基础知识',
        description:
          '了解领域的核心概念和基础框架，为后续学习奠定坚实基础。',
      },
      {
        title: '第二章: 高级策略',
        description:
          '深入探讨进阶技巧和方法，帮助您解决更复杂的挑战。',
      },
      {
        title: '第三章: 实战案例',
        description:
          '通过真实案例分析，了解如何将理论应用到实际情境中。',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1492171983775-a51717616c0d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
      alt: '电子书内容预览',
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">深入浅出的学习体验</h3>
      精心设计的学习路径，让您能够循序渐进地掌握关键知识和技能
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- 读者评价 -->
  <Testimonials
    tagline="读者评价"
    title="他们怎么说"
    testimonials={[
      {
        testimonial: '这本电子书彻底改变了我对这个领域的理解。内容深入浅出，实用性极强。',
        name: '张先生',
        job: '行业专家',
        image: {
          src: 'https://images.unsplash.com/photo-1633332755192-727a05c4013d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1180&q=80',
          alt: '读者照片',
        },
      },
      {
        testimonial: '购买这本电子书是我今年做的最好的投资之一。内容超出我的预期，非常值得推荐！',
        name: '李女士',
        job: '资深从业者',
        image: {
          src: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1180&q=80',
          alt: '读者照片',
        },
      },
      {
        testimonial: '作为一名初学者，这本电子书给了我清晰的学习路径和实用的工具，让我能快速上手。',
        name: '王先生',
        job: '新手学习者',
        image: {
          src: 'https://images.unsplash.com/photo-1565049786474-1dea82a8b995?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1180&q=80',
          alt: '读者照片',
        },
      },
    ]}
  />

  <!-- 购买流程 -->
  <Steps
    title="简单三步，立即开始您的学习之旅"
    items={[
      {
        title: '第一步: <span class="font-medium">购买电子书</span>',
        description:
          '点击“立即购买”按钮，通过安全的支付系统完成订购。支持支付宝、微信支付等多种支付方式。',
        icon: 'tabler:shopping-cart',
      },
      {
        title: '第二步: <span class="font-medium">获取访问</span>',
        description:
          '付款完成后，您将立即收到一封含有下载链接或访问账号的电子邮件，让您能够立即开始阅读。',
        icon: 'tabler:mail',
      },
      {
        title: '第三步: <span class="font-medium">开始学习</span>',
        description:
          '按照电子书中的指导，开始您的学习之旅。遇到问题随时可以联系我们获取支持。',
        icon: 'tabler:book',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
      alt: '订购流程',
    }}
  />

  <!-- FAQ 部分 -->
  <FAQs
    title="常见问题"
    subtitle="对电子书有疑问？以下是我们最常被问到的问题"
    tagline="FAQ"
    classes={{ container: 'max-w-6xl' }}
    items={[
      {
        title: '电子书是什么格式的？',
        description:
          '我们提供多种格式以满足不同需求，包括PDF、EPUB和MOBI格式，适用于各种设备和阅读器。',
      },
      {
        title: '购买后如何获取电子书？',
        description:
          '付款完成后，您将立即收到一封包含下载链接的电子邮件。此外，您还可以在您的账户中随时访问购买的电子书。',
      },
      {
        title: '电子书会定期更新吗？',
        description:
          '是的，我们会定期更新电子书内容，确保信息始终保持最新。一次购买，您将免费获得所有未来的更新。',
      },
      {
        title: '如果我对内容不满意，可以退款吗？',
        description:
          '当然可以。我们提供30天无条件退款保证。如果您对电子书不满意，只需发送邮件给我们，我们将全额退款。',
      },
      {
        title: '可以在多台设备上阅读这本电子书吗？',
        description:
          '是的，您可以在不限数量的个人设备上阅读您购买的电子书。我们不设置DRM限制，让您的阅读体验更加便捷。',
      },
      {
        title: '购买后能得到什么支持？',
        description:
          '除了电子书本身，您还将获得访问专属社区的权限，以及直接向作者提问的机会。我们致力于确保您能充分利用所学知识。',
      },
    ]}
  />

  <!-- 价格部分 -->
  <div id="pricing" class="py-12 md:py-20">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="relative py-16">
        <div class="flex flex-col max-w-xl mx-auto text-center p-8 rounded-xl mt-4 backdrop-blur border border-gray-200 dark:border-gray-700 bg-white/60 dark:bg-gray-900/60">
          <h2 class="text-3xl md:text-4xl font-bold leading-tighter tracking-tighter mb-4 font-heading">
            <span class="text-accent dark:text-blue-400">仅需</span> ¥{GUMROAD_PRICE}
          </h2>
          <p class="text-xl text-gray-600 dark:text-slate-400">
            一次付费，终身受益。包含免费更新和30天内无条件退款保证。
          </p>

          <div class="mt-6">
            <a 
              href={`https://gumroad.com/l/${GUMROAD_PERMALINK || GUMROAD_PRODUCT_ID}`} 
              class="btn btn-primary"
              data-gumroad-overlay-checkout="true"
            >立即购买</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 联系支持 -->
  <Content
    id="support"
    isReversed
    tagline="支持服务"
    title="有问题？我们随时为您提供帮助"
    items={[
      {
        title: '电子邮件支持',
        description: '发送邮件至 support@example.com，我们会在24小时内回复您的问题。',
      },
      {
        title: '聊天机器人',
        description: '使用我们的聊天机器人获取即时回答，解决常见问题。',
      },
      {
        title: '社区交流',
        description: '加入我们的读者社区，与其他学习者和作者进行交流和讨论。',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
      alt: '客户支持',
    }}
  >
    <Fragment slot="content">
      <div class="flex flex-col gap-3">
        <p>
          我们致力于为您提供最好的学习体验和支持服务。如有任何问题，请随时联系我们。
        </p>
        <p class="text-lg">
          <a 
            href={`https://gumroad.com/l/${GUMROAD_PERMALINK || GUMROAD_PRODUCT_ID}`} 
            class="text-blue-600 hover:underline"
            data-gumroad-overlay-checkout="true"
          >点击这里</a>立即购买电子书（¥{GUMROAD_PRICE}），开启您的学习之旅。
        </p>
      </div>
    </Fragment>
  </Content>
</Layout>
